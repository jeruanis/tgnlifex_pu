!function(e,t,r){"use strict";function a(){var t=e.location.hash.substr(1),r=t.split("-"),a=r.length>1&&/^\+?\d+$/.test(r[r.length-1])?parseInt(r.pop(-1),10)||1:1,n=r.join("-");return{hash:t,index:a<1?1:a,gallery:n}}function n(e){""!==e.gallery&&r("[data-fancybox='"+r.escapeSelector(e.gallery)+"']").eq(e.index-1).focus().trigger("click.fb-start")}function o(e){var t,r;return!!e&&(t=e.current?e.current.opts:e.opts,""!==(r=t.hash||(t.$orig?t.$orig.data("fancybox")||t.$orig.data("fancybox-trigger"):""))&&r)}r.escapeSelector||(r.escapeSelector=function(e){return(e+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e})}),r(function(){!1!==r.fancybox.defaults.hash&&(r(t).on({"onInit.fb":function(e,t){var r,n;!1!==t.group[t.currIndex].opts.hash&&(r=a(),(n=o(t))&&r.gallery&&n==r.gallery&&(t.currIndex=r.index-1))},"beforeShow.fb":function(r,a,n,c){var h;n&&!1!==n.opts.hash&&(h=o(a))&&(a.currentHash=h+(a.group.length>1?"-"+(n.index+1):""),e.location.hash!=="#"+a.currentHash&&(c&&!a.origHash&&(a.origHash=e.location.hash),a.hashTimer&&clearTimeout(a.hashTimer),a.hashTimer=setTimeout(function(){"replaceState"in e.history?(e.history[c?"pushState":"replaceState"]({},t.title,e.location.pathname+e.location.search+"#"+a.currentHash),c&&(a.hasCreatedHistory=!0)):e.location.hash=a.currentHash,a.hashTimer=null},300)))},"beforeClose.fb":function(r,a,n){n&&!1!==n.opts.hash&&(clearTimeout(a.hashTimer),a.currentHash&&a.hasCreatedHistory?e.history.back():a.currentHash&&("replaceState"in e.history?e.history.replaceState({},t.title,e.location.pathname+e.location.search+(a.origHash||"")):e.location.hash=a.origHash),a.currentHash=null)}}),r(e).on("hashchange.fb",function(){var e=a(),t=null;r.each(r(".fancybox-container").get().reverse(),function(e,a){var n=r(a).data("FancyBox");if(n&&n.currentHash)return t=n,!1}),t?t.currentHash===e.gallery+"-"+e.index||1===e.index&&t.currentHash==e.gallery||(t.currentHash=null,t.close()):""!==e.gallery&&n(e)}),setTimeout(function(){r.fancybox.getInstance()||n(a())},50))})}(window,document,jQuery);