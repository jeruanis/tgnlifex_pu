!function(t,i,s){"use strict";var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(i){return t.setTimeout(i,1e3/60)},e=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(i){t.clearTimeout(i)},o=function(i){var s=[];i=(i=i.originalEvent||i||t.e).touches&&i.touches.length?i.touches:i.changedTouches&&i.changedTouches.length?i.changedTouches:[i];for(var n in i)i[n].pageX?s.push({x:i[n].pageX,y:i[n].pageY}):i[n].clientX&&s.push({x:i[n].clientX,y:i[n].clientY});return s},a=function(t,i,s){return i&&t?"x"===s?t.x-i.x:"y"===s?t.y-i.y:Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)):0},c=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||s.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var i=0,n=t[0].attributes,e=n.length;i<e;i++)if("data-fancybox-"===n[i].nodeName.substr(0,14))return!0;return!1},r=function(i){var s=t.getComputedStyle(i)["overflow-y"],n=t.getComputedStyle(i)["overflow-x"],e=("scroll"===s||"auto"===s)&&i.scrollHeight>i.clientHeight,o=("scroll"===n||"auto"===n)&&i.scrollWidth>i.clientWidth;return e||o},h=function(t){for(var i=!1;!(i=r(t.get(0)))&&(t=t.parent()).length&&!t.hasClass("fancybox-stage")&&!t.is("body"););return i},l=function(t){this.instance=t,this.$bg=t.$refs.bg,this.$stage=t.$refs.stage,this.$container=t.$refs.container,this.destroy(),this.$container.on("touchstart.fb.touch mousedown.fb.touch",s.proxy(this,"ontouchstart"))};l.prototype.destroy=function(){this.$container.off(".fb.touch"),s(i).off(".fb.touch"),this.requestId&&(e(this.requestId),this.requestId=null),this.tapped&&(clearTimeout(this.tapped),this.tapped=null)},l.prototype.ontouchstart=function(n){var e=s(n.target),r=this.instance,l=r.current,u=l.$slide,p=l.$content,f="touchstart"==n.type;if(f&&this.$container.off("mousedown.fb.touch"),(!n.originalEvent||2!=n.originalEvent.button)&&u.length&&e.length&&!c(e)&&!c(e.parent())&&(e.is("img")||!(n.originalEvent.clientX>e[0].clientWidth+e.offset().left))){if(!l||r.isAnimating||l.$slide.hasClass("fancybox-animated"))return n.stopPropagation(),void n.preventDefault();this.realPoints=this.startPoints=o(n),this.startPoints.length&&(l.touch&&n.stopPropagation(),this.startEvent=n,this.canTap=!0,this.$target=e,this.$content=p,this.opts=l.opts.touch,this.isPanning=!1,this.isSwiping=!1,this.isZooming=!1,this.isScrolling=!1,this.canPan=r.canPan(),this.startTime=(new Date).getTime(),this.distanceX=this.distanceY=this.distance=0,this.canvasWidth=Math.round(u[0].clientWidth),this.canvasHeight=Math.round(u[0].clientHeight),this.contentLastPos=null,this.contentStartPos=s.fancybox.getTranslate(this.$content)||{top:0,left:0},this.sliderStartPos=s.fancybox.getTranslate(u),this.stagePos=s.fancybox.getTranslate(r.$refs.stage),this.sliderStartPos.top-=this.stagePos.top,this.sliderStartPos.left-=this.stagePos.left,this.contentStartPos.top-=this.stagePos.top,this.contentStartPos.left-=this.stagePos.left,s(i).off(".fb.touch").on(f?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",s.proxy(this,"ontouchend")).on(f?"touchmove.fb.touch":"mousemove.fb.touch",s.proxy(this,"ontouchmove")),s.fancybox.isMobile&&i.addEventListener("scroll",this.onscroll,!0),((this.opts||this.canPan)&&(e.is(this.$stage)||this.$stage.find(e).length)||(e.is(".fancybox-image")&&n.preventDefault(),s.fancybox.isMobile&&e.parents(".fancybox-caption").length))&&(this.isScrollable=h(e)||h(e.parent()),s.fancybox.isMobile&&this.isScrollable||n.preventDefault(),(1===this.startPoints.length||l.hasError)&&(this.canPan?(s.fancybox.stop(this.$content),this.isPanning=!0):this.isSwiping=!0,this.$container.addClass("fancybox-is-grabbing")),2===this.startPoints.length&&"image"===l.type&&(l.isLoaded||l.$ghost)&&(this.canTap=!1,this.isSwiping=!1,this.isPanning=!1,this.isZooming=!0,s.fancybox.stop(this.$content),this.centerPointStartX=.5*(this.startPoints[0].x+this.startPoints[1].x)-s(t).scrollLeft(),this.centerPointStartY=.5*(this.startPoints[0].y+this.startPoints[1].y)-s(t).scrollTop(),this.percentageOfImageAtPinchPointX=(this.centerPointStartX-this.contentStartPos.left)/this.contentStartPos.width,this.percentageOfImageAtPinchPointY=(this.centerPointStartY-this.contentStartPos.top)/this.contentStartPos.height,this.startDistanceBetweenFingers=a(this.startPoints[0],this.startPoints[1]))))}},l.prototype.onscroll=function(t){this.isScrolling=!0,i.removeEventListener("scroll",this.onscroll,!0)},l.prototype.ontouchmove=function(t){void 0===t.originalEvent.buttons||0!==t.originalEvent.buttons?this.isScrolling?this.canTap=!1:(this.newPoints=o(t),(this.opts||this.canPan)&&this.newPoints.length&&this.newPoints.length&&(this.isSwiping&&!0===this.isSwiping||t.preventDefault(),this.distanceX=a(this.newPoints[0],this.startPoints[0],"x"),this.distanceY=a(this.newPoints[0],this.startPoints[0],"y"),this.distance=a(this.newPoints[0],this.startPoints[0]),this.distance>0&&(this.isSwiping?this.onSwipe(t):this.isPanning?this.onPan():this.isZooming&&this.onZoom()))):this.ontouchend(t)},l.prototype.onSwipe=function(i){var o,a=this,c=a.instance,r=a.isSwiping,h=a.sliderStartPos.left||0;if(!0!==r)"x"==r&&(a.distanceX>0&&(a.instance.group.length<2||0===a.instance.current.index&&!a.instance.current.opts.loop)?h+=Math.pow(a.distanceX,.8):a.distanceX<0&&(a.instance.group.length<2||a.instance.current.index===a.instance.group.length-1&&!a.instance.current.opts.loop)?h-=Math.pow(-a.distanceX,.8):h+=a.distanceX),a.sliderLastPos={top:"x"==r?0:a.sliderStartPos.top+a.distanceY,left:h},a.requestId&&(e(a.requestId),a.requestId=null),a.requestId=n(function(){a.sliderLastPos&&(s.each(a.instance.slides,function(t,i){var n=i.pos-a.instance.currPos;s.fancybox.setTranslate(i.$slide,{top:a.sliderLastPos.top,left:a.sliderLastPos.left+n*a.canvasWidth+n*i.opts.gutter})}),a.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(a.distance)>10){if(a.canTap=!1,c.group.length<2&&a.opts.vertical?a.isSwiping="y":c.isDragging||!1===a.opts.vertical||"auto"===a.opts.vertical&&s(t).width()>800?a.isSwiping="x":(o=Math.abs(180*Math.atan2(a.distanceY,a.distanceX)/Math.PI),a.isSwiping=o>45&&o<135?"y":"x"),"y"===a.isSwiping&&s.fancybox.isMobile&&a.isScrollable)return void(a.isScrolling=!0);c.isDragging=a.isSwiping,a.startPoints=a.newPoints,s.each(c.slides,function(t,i){var n,e;s.fancybox.stop(i.$slide),n=s.fancybox.getTranslate(i.$slide),e=s.fancybox.getTranslate(c.$refs.stage),i.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,i){return(i.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),i.pos===c.current.pos&&(a.sliderStartPos.top=n.top-e.top,a.sliderStartPos.left=n.left-e.left),s.fancybox.setTranslate(i.$slide,{top:n.top-e.top,left:n.left-e.left})}),c.SlideShow&&c.SlideShow.isActive&&c.SlideShow.stop()}},l.prototype.onPan=function(){var t=this;a(t.newPoints[0],t.realPoints[0])<(s.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&e(t.requestId),t.requestId=n(function(){s.fancybox.setTranslate(t.$content,t.contentLastPos)}))},l.prototype.limitMovement=function(){var t,i,s,n,e,o,a=this.canvasWidth,c=this.canvasHeight,r=this.distanceX,h=this.distanceY,l=this.contentStartPos,u=l.left,p=l.top,f=l.width,g=l.height;return e=f>a?u+r:u,o=p+h,t=Math.max(0,.5*a-.5*f),i=Math.max(0,.5*c-.5*g),s=Math.min(a-f,.5*a-.5*f),n=Math.min(c-g,.5*c-.5*g),r>0&&e>t&&(e=t-1+Math.pow(-t+u+r,.8)||0),r<0&&e<s&&(e=s+1-Math.pow(s-u-r,.8)||0),h>0&&o>i&&(o=i-1+Math.pow(-i+p+h,.8)||0),h<0&&o<n&&(o=n+1-Math.pow(n-p-h,.8)||0),{top:o,left:e}},l.prototype.limitPosition=function(t,i,s,n){var e=this.canvasWidth,o=this.canvasHeight;return t=s>e?(t=t>0?0:t)<e-s?e-s:t:Math.max(0,e/2-s/2),i=n>o?(i=i>0?0:i)<o-n?o-n:i:Math.max(0,o/2-n/2),{top:i,left:t}},l.prototype.onZoom=function(){var i=this,o=i.contentStartPos,c=o.width,r=o.height,h=o.left,l=o.top,u=a(i.newPoints[0],i.newPoints[1])/i.startDistanceBetweenFingers,p=Math.floor(c*u),f=Math.floor(r*u),g=(c-p)*i.percentageOfImageAtPinchPointX,d=(r-f)*i.percentageOfImageAtPinchPointY,P=(i.newPoints[0].x+i.newPoints[1].x)/2-s(t).scrollLeft(),b=(i.newPoints[0].y+i.newPoints[1].y)/2-s(t).scrollTop(),m=P-i.centerPointStartX,y={top:l+(d+(b-i.centerPointStartY)),left:h+(g+m),scaleX:u,scaleY:u};i.canTap=!1,i.newWidth=p,i.newHeight=f,i.contentLastPos=y,i.requestId&&e(i.requestId),i.requestId=n(function(){s.fancybox.setTranslate(i.$content,i.contentLastPos)})},l.prototype.ontouchend=function(t){var n=this.isSwiping,a=this.isPanning,c=this.isZooming,r=this.isScrolling;if(this.endPoints=o(t),this.dMs=Math.max((new Date).getTime()-this.startTime,1),this.$container.removeClass("fancybox-is-grabbing"),s(i).off(".fb.touch"),i.removeEventListener("scroll",this.onscroll,!0),this.requestId&&(e(this.requestId),this.requestId=null),this.isSwiping=!1,this.isPanning=!1,this.isZooming=!1,this.isScrolling=!1,this.instance.isDragging=!1,this.canTap)return this.onTap(t);this.speed=100,this.velocityX=this.distanceX/this.dMs*.5,this.velocityY=this.distanceY/this.dMs*.5,a?this.endPanning():c?this.endZooming():this.endSwiping(n,r)},l.prototype.endSwiping=function(t,i){var n=!1,e=this.instance.group.length,o=Math.abs(this.distanceX),a="x"==t&&e>1&&(this.dMs>130&&o>10||o>50);this.sliderLastPos=null,"y"==t&&!i&&Math.abs(this.distanceY)>50?(s.fancybox.animate(this.instance.current.$slide,{top:this.sliderStartPos.top+this.distanceY+150*this.velocityY,opacity:0},200),n=this.instance.close(!0,250)):a&&this.distanceX>0?n=this.instance.previous(300):a&&this.distanceX<0&&(n=this.instance.next(300)),!1!==n||"x"!=t&&"y"!=t||this.instance.centerSlide(200),this.$container.removeClass("fancybox-is-sliding")},l.prototype.endPanning=function(){var t,i,n;this.contentLastPos&&(!1===this.opts.momentum||this.dMs>350?(t=this.contentLastPos.left,i=this.contentLastPos.top):(t=this.contentLastPos.left+500*this.velocityX,i=this.contentLastPos.top+500*this.velocityY),(n=this.limitPosition(t,i,this.contentStartPos.width,this.contentStartPos.height)).width=this.contentStartPos.width,n.height=this.contentStartPos.height,s.fancybox.animate(this.$content,n,366))},l.prototype.endZooming=function(){var t,i,n,e,o=this.instance.current,a=this.newWidth,c=this.newHeight;this.contentLastPos&&(t=this.contentLastPos.left,e={top:i=this.contentLastPos.top,left:t,width:a,height:c,scaleX:1,scaleY:1},s.fancybox.setTranslate(this.$content,e),a<this.canvasWidth&&c<this.canvasHeight?this.instance.scaleToFit(150):a>o.width||c>o.height?this.instance.scaleToActual(this.centerPointStartX,this.centerPointStartY,150):(n=this.limitPosition(t,i,a,c),s.fancybox.animate(this.$content,n,150)))},l.prototype.onTap=function(i){var n,e=this,a=s(i.target),c=e.instance,r=c.current,h=i&&o(i)||e.startPoints,l=h[0]?h[0].x-s(t).scrollLeft()-e.stagePos.left:0,u=h[0]?h[0].y-s(t).scrollTop()-e.stagePos.top:0,p=function(t){var n=r.opts[t];if(s.isFunction(n)&&(n=n.apply(c,[r,i])),n)switch(n){case"close":c.close(e.startEvent);break;case"toggleControls":c.toggleControls();break;case"next":c.next();break;case"nextOrClose":c.group.length>1?c.next():c.close(e.startEvent);break;case"zoom":"image"==r.type&&(r.isLoaded||r.$ghost)&&(c.canPan()?c.scaleToFit():c.isScaledDown()?c.scaleToActual(l,u):c.group.length<2&&c.close(e.startEvent))}};if((!i.originalEvent||2!=i.originalEvent.button)&&(a.is("img")||!(l>a[0].clientWidth+a.offset().left))){if(a.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))n="Outside";else if(a.is(".fancybox-slide"))n="Slide";else{if(!c.current.$content||!c.current.$content.find(a).addBack().filter(a).length)return;n="Content"}if(e.tapped){if(clearTimeout(e.tapped),e.tapped=null,Math.abs(l-e.tapX)>50||Math.abs(u-e.tapY)>50)return this;p("dblclick"+n)}else e.tapX=l,e.tapY=u,r.opts["dblclick"+n]&&r.opts["dblclick"+n]!==r.opts["click"+n]?e.tapped=setTimeout(function(){e.tapped=null,c.isAnimating||p("click"+n)},500):p("click"+n);return this}},s(i).on("onActivate.fb",function(t,i){i&&!i.Guestures&&(i.Guestures=new l(i))}).on("beforeClose.fb",function(t,i){i&&i.Guestures&&i.Guestures.destroy()})}(window,document,jQuery);